<app-header></app-header>
<div class="content-container">
  <div class="sacola-container">
    <h1>Sacola de Compras</h1>
    <table [dataSource]="sacolaService.getSacola()" mat-table>
      <ng-container matColumnDef="nome">
        <th mat-header-cell *matHeaderCellDef> Nome </th>
        <td mat-cell *matCellDef="let element">
          {{ element.produto.nome }}
          {{ isPizza(element.produto) ? formatTamanhoPizza(element.produto.tamanhoPizza) : formatarMl(element.produto.ml) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="quantidade">
        <th mat-header-cell *matHeaderCellDef> Quantidade </th>
        <td mat-cell *matCellDef="let element"> {{ element.quantidade }} </td>
      </ng-container>

      <ng-container matColumnDef="precoUnit">
        <th mat-header-cell *matHeaderCellDef> Preço Unitário </th>
        <td mat-cell *matCellDef="let element"> R${{ parseFloat(element.produto.preco).toFixed(2) }} </td>
      </ng-container>

      <ng-container matColumnDef="precoTotal">
        <th mat-header-cell *matHeaderCellDef> Preço Total </th>
        <td mat-cell *matCellDef="let element"> R${{ (parseFloat(element.produto.preco) * element.quantidade).toFixed(2) }} </td>
      </ng-container>

      <ng-container matColumnDef="acao">
        <th *matHeaderCellDef mat-header-cell></th>
        <td *matCellDef="let element" mat-cell id="btn-delete">
          <button color="warn" mat-icon-button>
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <div class="form-container">
    <h1>Opções</h1>
    <form [formGroup]="form">
      <mat-form-field appearance="fill">
        <mat-label>Cupom de Desconto</mat-label>
        <input matInput formControlName="codigoCupom">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Forma de Pagamento</mat-label>
        <mat-select formControlName="formaPagamento">
          <mat-option [value]="FormaPagamento.PIX">Pix</mat-option>
          <mat-option [value]="FormaPagamento.DINHEIRO">Dinheiro</mat-option>
          <mat-option [value]="FormaPagamento.CARTAO">Cartão</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Endereço para Entrega</mat-label>
        <mat-select formControlName="idEndereco">
          <mat-option *ngFor="let endereco of enderecos" [value]="endereco.id">
            {{ endereco.logradouro }}, {{ endereco.bairro }}, {{ endereco.cidade }}, {{ endereco.cep }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-flat-button color="warn" (click)="fazerPedido()">
        Finalizar Pedido
      </button>
    </form>
  </div>
</div>
<app-footer></app-footer>
